---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Home from "@components/Home.svelte";

let tags: string[] = [];

const recipes = await getCollection("recipes");
recipes
    .sort((x, y) => {
        const x_date= x.data.date ?? new Date(0);
        const y_date= y.data.date ?? new Date(0);
        return x_date > y_date ? -1 : 1;
    }).forEach((entry) => {
        entry.data.tags?.forEach((tag) => {
            if (tags.indexOf(tag) < 0) {
                tags.push(tag);
            }
        });
    });

const data = {
    tags: tags,
    recipes: recipes.slice(0, 32),
}

---

<Layout title="Based Cooking">
    <Home client:load data={data} />
</Layout>

